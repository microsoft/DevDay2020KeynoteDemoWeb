<!DOCTYPE html>
<html lang="en">
<head>
    <title>Basic Demo</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" async crossorigin="anonymous" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="./styles.css" rel="stylesheet">
    <link href="./menu.css" rel="stylesheet">

</head>
<body>
    <div class="fold-tester"></div>
    <div class="menu sticky-top">
        <div class="left">
            <i class="fa fa-bars" aria-hidden="true"></i>
            <i class="fa fa-search" aria-hidden="true"></i>
        </div>
        <div class="center">The Daily Prophet</div>
        <div class="right">
            <mgt-login class="login-btn"></mgt-login>
        </div>
    </div>
    
    <div class="wrapper">
        <div class="article">
            <h1 class="headline display-5 font-weight-bold font-italic">Seattle Mayor Announces Free Kittens for All Residents</h1>
            
            <div>
                <img class="img-fluid mt-3" src="./images/kitten.jpg" />
            </div>
            
            <p class="photo-caption mt-1 text-muted">
                Photo caption lorem ipsum dolor sit amet, consectetur adipiscing elit.
            </p>
            <p class="mt-1">
                By <a href="#">Lana Marshall</a>
            </p>
            <div class="mt-1">
                January 1, 2020
            </div>
            
            <p class="article-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec volutpat, turpis quis blandit placerat, leo ipsum eleifend nisi, quis pharetra leo ante ut ante.</p>
            <p class="article-text">Curabitur vel accumsan ipsum, at eleifend ipsum. Morbi at ante sed ex hendrerit sollicitudin. Maecenas eleifend urna dui, vel sagittis metus accumsan in.</p>
            <p class="article-text">Etiam iaculis tristique accumsan. Donec a ante nec urna ullamcorper hendrerit non eu felis. Donec laoreet erat sit amet iaculis rutrum. Aliquam quis lobortis sem. Phasellus quis vestibulum metus. Curabitur ullamcorper feugiat hendrerit.</p> 
            <p class="article-text">Vestibulum sodales arcu et commodo tincidunt. Morbi vehicula arcu nec sem dapibus vestibulum. Proin consequat nibh dolor, bibendum blandit purus maximus tempus.</p>
            <p class="article-text">Suspendisse eget iaculis eros. Mauris at velit et nisi tincidunt laoreet eu tristique elit. Suspendisse eleifend sollicitudin vestibulum. Curabitur mattis volutpat libero. Donec ornare vel massa vel dignissim. </p>
            <p class="article-text">Quisque nec ex non sapien molestie tristique ac id elit. Aenean vitae pharetra arcu. Proin porttitor ultricies auctor. In vitae facilisis urna. Donec sed vulputate urna. Phasellus consectetur odio vitae ultrices imperdiet.</p>
            <p class="article-text">Pellentesque sapien odio, lobortis vitae odio elementum, luctus aliquam orci. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Suspendisse vitae nisi mauris.</p>
            <p class="article-text">Nullam faucibus nibh sit amet faucibus eleifend. Morbi id neque in leo consequat egestas placerat sed ante. Nullam cursus efficitur elit, vel viverra felis tincidunt ac. Praesent ac sem ac lorem pulvinar feugiat a aliquet dui. Proin dictum vitae dolor et efficitur.</p>
            <p class="article-text">Aliquam erat volutpat. Donec finibus imperdiet purus, eget vestibulum felis tempus eget. Nam aliquet dolor sit amet dui mollis ornare. Mauris accumsan tristique magna quis placerat. Vestibulum dignissim nisi ac erat blandit, vitae facilisis ex finibus.</p>
            <p class="article-text">Pellentesque porttitor risus ut scelerisque rutrum. Etiam venenatis ante sem. In hac habitasse platea dictumst. Nullam imperdiet euismod risus id mattis. Pellentesque placerat augue enim, pulvinar venenatis lectus mollis ut.</p>
            <p class="article-text">Curabitur eget sodales orci. Proin suscipit dolor nunc, ac tincidunt ante dapibus ac. Proin in enim accumsan urna interdum aliquam. Phasellus sed mattis risus. Donec ligula ante, iaculis finibus blandit scelerisque, hendrerit non erat.</p>
            <p class="article-text">Cras suscipit facilisis augue in finibus. Nullam tristique eros sed ex placerat aliquet. Nullam in semper nibh. Integer porta maximus elit, a venenatis tellus lacinia a.</p>
            <p class="article-text">Cras ac semper sem, non ornare enim. Integer finibus, leo eu convallis efficitur, lorem elit dictum nibh, sed scelerisque mauris mi eu quam. Donec gravida urna et elit tempor, sed pulvinar massa eleifend. Sed a nibh sit amet ipsum finibus sollicitudin vel et ligula.</p>
            <p class="article-text">Nulla eget aliquam tellus. Cras tincidunt massa vitae dolor placerat imperdiet. Nunc tellus elit, blandit eget pulvinar eu, cursus ut eros. Nulla id lectus non elit mollis congue. Curabitur faucibus sodales ligula, id porttitor libero viverra egestas. </p>
            <p class="article-text">Duis vitae rutrum lorem. Maecenas auctor molestie dolor ut ullamcorper. Cras ornare lobortis dui id hendrerit.</p>
            <p class="article-text">Integer ultricies lectus a imperdiet sollicitudin. Praesent facilisis, magna vitae volutpat ullamcorper, urna tellus auctor nisl, pharetra efficitur lectus libero eu nibh. Proin vitae fermentum metus.</p>
            <p class="article-text">Ut in tincidunt felis. Vestibulum auctor nec diam at ultricies. Nam massa libero, lobortis non ornare eget, ultrices at velit. Ut semper ex libero, molestie iaculis enim blandit id. Phasellus feugiat sapien vitae ligula tincidunt, id hendrerit tortor egestas.</p>
            <p class="article-text">Quisque sit amet ligula ante. Mauris scelerisque porttitor dapibus. Mauris mattis et augue vulputate facilisis. In congue, enim at viverra iaculis, neque sapien maximus quam, vitae maximus neque odio vel sapien. Sed auctor odio justo, ac elementum lacus eleifend Pellentesque tortor velit, mollis eu felis eget, consequat iaculis nulla. Sed vel nibh enim. Cras ornare lacus volutpat metus vehicula, in molestie massa cursus.</p>

            <div class="mt-5 w-100">
                <button class="btn btn-block btn-secondary">Show 89 comments <i class="fa fa-commenting-o"></i></button>
            </div>

            <div class="w-100">
                <hr class="mt-5" />
            </div>
            <div class="row mb-5 w-100 p-0">
                <div class="col-3">
                    <p class="category">CATEGORY ONE</p>
                    <p>Link 1</p>
                    <p>Link 2</p>
                    <p>Link 3</p>
                    <p>Link 4</p>
                    <p>Link 5</p>
                </div>
                <div class="col-3">
                    <p class="category">CATEGORY TWO</p>
                    <p>Link 1</p>
                    <p>Link 2</p>
                    <p>Link 3</p>
                    <p>Link 4</p>
                    <p>Link 5</p>
                </div>
                <div class="col-3">
                    <p class="category">CATEGORY THREE</p>
                    <p>Link 1</p>
                    <p>Link 2</p>
                    <p>Link 3</p>
                    <p>Link 4</p>
                    <p>Link 5</p>
                </div>
                <div class="col-3">
                    <p class="category">CATEGORY FOUR</p>
                    <p>Link 1</p>
                    <p>Link 2</p>
                    <p>Link 3</p>
                    <p>Link 4</p>
                    <p>Link 5</p>
                </div>
            </div>
        </div>

        <!-- Add our paging buttons. Visible only when spanning. -->
        <button class="btn btn-link paging-btn paging-btn-left">
            <span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-angle-left fa-stack-1x fa-inverse"></i>
            </span>
        </button>
        <button class="btn btn-link paging-btn paging-btn-right">
            <span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-angle-right fa-stack-1x fa-inverse"></i>
            </span>
        </button>
    </div>

    <!-- For login button, use Graph Toolkit -->
    <script src="https://unpkg.com/@microsoft/mgt/dist/bundle/mgt-loader.js"></script>
    <mgt-msal-provider client-id="1a61b651-7860-4bf8-94d0-d49bf45dcf67"></mgt-msal-provider>

    <!-- Polyfills for dual screen capabilities -->
    <script src="./spanning-css-polyfill.js"></script>
    <script src="./window-segments-polyfill.js"></script>
    <script>

        function fakeSetSpanningMode(spanningOrNull) {
            const config = window["__foldables_env_vars__"];
            if (!spanningOrNull) {
                // Then toggle it.
                spanningOrNull = config.spanning === "none" ? "single-fold-vertical" : "none";
            }

            config.update({
                //spanning: "none",
                spanning: spanningOrNull, 
                foldSize: 30
            });
        }
        
        var currentPage = 0;
        function scrollToPage(pageNumber) {
            currentPage = pageNumber;

            // Scroll over to that page.
            const article = document.querySelector(".article");
            const wrapper = document.querySelector(".wrapper");
            const foldWidth = window["__foldables_env_vars__"].foldSize;
            const screenWidth = document.querySelector(".article-text").scrollWidth + foldWidth;
            wrapper.scrollLeft = screenWidth * pageNumber;
            
            // Hide the "page left" button if we're on the first page (page zero).
            document.querySelector(".paging-btn-left").style.visibility = pageNumber === 0 ? "hidden" : "visible";
        }

        function printWindowSegments() {
            const screens = window.getWindowSegments();
            console.log("Window segments:")
            console.table(screens);
            console.log("Window size:", window.innerWidth, window.innerHeight);
        }

        // Clicking the menu at the top left toggles spanning.
        document.querySelector(".fa-bars").addEventListener("click", () => fakeSetSpanningMode(null));

        // Clicking the paging buttons scroll to the desired page.
        document.querySelector(".paging-btn-left").addEventListener("click", () => scrollToPage(currentPage - 1));
        document.querySelector(".paging-btn-right").addEventListener("click", () => scrollToPage(currentPage + 1));

        // See how many screens we have. If we have 2, go into spanning mode.
        const screens = window["getWindowSegments"]();
        if (screens.length > 1) {
            fakeSetSpanningMode("single-fold-vertical");
        }

        window.addEventListener("resize", () => {
            console.log("resized");
            printWindowSegments();
        });
        printWindowSegments();

    </script>

</body>
</html>